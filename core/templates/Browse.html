{% extends 'base.html' %}

{% block Start %}
<section id="browse-content">
    <div class="header-link">
        <h2>Browse whatever you want</h2>
        <div id="search-nav" >
          <form method="get">
              <input type="search" name="search" placeholder="Search" autocomplete="on" value="{{search}}" onclick="this.onsubmit()">
              <button type="submit">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search svgimg" viewBox="0 0 16 16">
                  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                </svg>
              </button>
          </form>
      </div>
    </div>

    <div class="browse-container">
        <div class="browse-nav-container">
          <div class="browse-container-title">
            <p>Tags</p>
          </div>
          <div class="browse-container-category">
              <div class="browse-container-data">
               {% for category in category  %}
                  <a href="{% url 'Browse' %}?category={{category.category}}" style="{% if category.category == category_name %} background-color: red; {% endif %}">{{category.category}}</a>
               {% endfor %}
              </div>
            </div>
            <div class="browse-container-title">
              <p style="padding: 0 15px;">Tags</p>
            </div>
            <div class="browse-container-tags">
             <div class="browse-container-data">
                 {% for tags in movie_tags  %}
                   <a href="{% url 'Browse' %}?tags={{tags.name}}" style="{% if tags.name == tag_name %} background-color: red; {% endif %}">{{tags.name}}</a>
                 {% endfor %}
              </div>
            </div>
        </div>
        <div class="browse-main-container">
            <div class="browse-main-container-slider">
                <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img src="https://images.pexels.com/photos/19101334/pexels-photo-19101334/free-photo-of-girl-playing-soccer.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" class="d-block w-100" alt="...">
                  </div>
                  <div class="carousel-item">
                    <img src="https://images.pexels.com/photos/19101334/pexels-photo-19101334/free-photo-of-girl-playing-soccer.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" class="d-block w-100" alt="...">
                  </div>
                  <div class="carousel-item">
                    <img src="https://images.pexels.com/photos/19101334/pexels-photo-19101334/free-photo-of-girl-playing-soccer.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" class="d-block w-100" alt="...">
                  </div>
                  <div class="carousel-item">
                    <img src="https://images.pexels.com/photos/19101334/pexels-photo-19101334/free-photo-of-girl-playing-soccer.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" class="d-block w-100" alt="...">
                  </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
                </div>
            </div>
            <div class="browse-main-container-items">
              <div class="browse-main-container-filter">
                <h5>
                    Continue Watching ...
                </h5>
                <div>
                  <form method="GET">
                    <select name="year" onchange="this.form.submit()">
                      <option value="">Year</option>
                      {% for item in all_movies  %}
                         <option value="{{item.movie_year}}">{{item.movie_year}} </option>
                      {% endfor %}
                  </select>
                </form>
                <form method="GET">
                  <select name="filter" onchange="this.form.submit()">
                    <option value="none">Filter</option>
                    <option value="Latest"
                    {% if sort_by == 'Latest' %}
                      selected
                    {% endif %}
                      >Latest</option>
                    <option value="Popular"
                    {% if sort_by == 'Popular' %}
                    selected
                   {% endif %}>Popular</option>
                  </select>
                </form>
              </div>

              </div>
              <div class="browse-main-container-data-all">
                <div class="scroll-holder">
                 <div class="scroll-items">
                    <p>Latest Release</p>
                    <div class="scroll-tray">
                      {% for items in items  %}
                      <a href="{% url 'detail' items.slug %}" >
                        <div class="scroll-tray-items">
                          <div class="scroll-tray-items-image">
                              <img src="{{items.poster_portrait}}" alt="{{items.name}}">
                          </div>
                          <div class="scroll-tray-items-data">
                            <div class="scroll-tray-items-update">
                              <p>{{items.updated_at}}</p>
                            </div>
                            <div class="scroll-tray-items-name">
                              <p class="p">{{items.name}}</p>
                              <p>{{items.movie_year}}</p>
                            </div>
                            <div class="scroll-tray-items-tag">
                             <p>{{items.tags.name}}</p>
                            </div>
                          </div>
                        </div>
                      </a>
                      {% empty %}
                      <p style="
                      color: #737373;
                      text-align: center;
                      display: block;
                      width: 100%;
                      font-size: clamp(11px,1vw,20px);
                      padding: 5px;
                      ">no data found</p>
                      {% endfor %}
                    </div>
                  </div>
                  {% include 'pagination.html' %}
                  </div>
                <div class="scroll-holder">
                  {% for tags in movie_tags  %}
                  <div class="scroll-items">
                    <p>{{tags.name}}</p>
                      <div class="scroll-tray">
                        {% for items in tags.movie_tags.all  %}
                        <a href="{% url 'detail' items.slug %}" >
                          <div class="scroll-tray-items scroll-animation">
                            <div class="scroll-tray-items-image">
                                <img src="{{items.poster_portrait}}" alt="{{items.name}}">
                            </div>
                            <div class="scroll-tray-items-data">
                              <div class="scroll-tray-items-update">
                                <p>{{items.updated_at}}</p>
                              </div>
                              <div class="scroll-tray-items-name">
                                <p class="p">{{items.name}}</p>
                                <p>{{items.movie_year}}</p>
                              </div>
                              <div class="scroll-tray-items-tag">
                               <p>{{items.tags.name}}</p>
                              </div>
                            </div>
                          </div>
                        </a>
                        {% empty %}
                        <p style="
                        color: #737373;
                        text-align: center;
                        display: block;
                        width: 100%;
                        font-size: clamp(11px,1vw,20px);
                        padding: 5px;
                        ">no data found</p>
                        {% endfor %}
                      </div>
                  </div>
                  {% endfor %}
                  </div>
                <div class="scroll-holder">
                  {% for category in category  %}
                  <div class="scroll-items">
                    <p>{{category.category}}</p>
                    <div class="scroll-tray">
                      {% for items in category.categories.all  %}
                      <a href="{% url 'detail' items.slug %}" >
                        <div class="scroll-tray-items scroll-animation">
                          <div class="scroll-tray-items-image">
                              <img src="{{items.poster_portrait}}" alt="{{items.name}}">
                          </div>
                          <div class="scroll-tray-items-data">
                            <div class="scroll-tray-items-update">
                              <p>{{items.updated_at}}</p>
                            </div>
                            <div class="scroll-tray-items-name">
                              <p class="p">{{items.name}}</p>
                              <p>{{items.movie_year}}</p>
                            </div>
                            <div class="scroll-tray-items-tag">
                             <p>{{items.tags.name}}</p>
                            </div>
                          </div>
                        </div>
                      </a>
                      {% empty %}
                      <p style="
                      color: #737373;
                      text-align: center;
                      display: block;
                      width: 100%;
                      font-size: clamp(11px,1vw,20px);
                      padding: 5px;
                      ">no data found</p>
                      {% endfor %}
                    </div>
                  </div>
                  {% endfor %}

                </div>
              </div>
            </div>

        </div>
    </div>

</section>
{% endblock Start %}
